"use strict";var gulp=require("gulp"),del=require("del"),autoprefixer=require("gulp-autoprefixer"),htmlmin=require("gulp-htmlmin"),sass=require("gulp-sass"),jsonminify=require("gulp-jsonminify2"),babel=require("gulp-babel"),uglify=require("gulp-uglify"),rename=require("gulp-rename"),minifycss=require("gulp-minify-css"),_require=require("gulp"),series=_require.series;gulp.task("clean",function(){return del(["./dist/**"])}),gulp.task("watch",function(){gulp.watch(["./**/*.json","!./node_modules/**","!./dist/**"],gulp.series("json")),gulp.watch(["./assets/**","!./node_modules/**","!./dist/**"],gulp.series("assets")),gulp.watch(["./**/*.wxml","!./node_modules/**","!./dist/**"],gulp.series("templates")),gulp.watch(["./**/*.wxss","!./node_modules/**","!./dist/**"],gulp.series("wxss")),gulp.watch(["./**/*.sass","!./node_modules/**","!./dist/**"],gulp.series("wxss")),gulp.watch(["./**/*.js","!./node_modules/**","!./dist/**"],gulp.series("scripts"))}),gulp.task("json",function(){return gulp.src(["./**/*.json","!./node_modules/**"]).pipe(gulp.dest("./dist"))}),gulp.task("jsonPro",function(){return gulp.src(["./**/*.json","!./node_modules/**"]).pipe(jsonminify()).pipe(gulp.dest("./dist"))}),gulp.task("assets",function(){return gulp.src("./assets/**").pipe(gulp.dest("./dist/assets"))}),gulp.task("templates",function(){return gulp.src("./**/*.wxml").pipe(gulp.dest("./dist"))}),gulp.task("templatesPro",function(){return gulp.src(["./**/*.wxml","!./node_modules/**"]).pipe(htmlmin({collapseWhitespace:!0,removeComments:!0,keepClosingSlash:!0})).pipe(gulp.dest("./dist"))}),gulp.task("wxss",function(){return gulp.src(["./**/*.{wxss,sass}","!./styles/**","!./node_modules/**"]).pipe(sass()).pipe(autoprefixer(["iOS >= 8","Android >= 4.1"])).pipe(rename(function(s){return s.extname=".wxss"})).pipe(gulp.dest("./dist"))}),gulp.task("wxssPro",function(){return gulp.src(["./**/*.{wxss,sass}","!./styles/**","!./node_modules/**"]).pipe(sass()).pipe(autoprefixer(["iOS >= 8","Android >= 4.1"])).pipe(minifycss()).pipe(rename(function(s){return s.extname=".wxss"})).pipe(gulp.dest("./dist"))}),gulp.task("scripts",function(){return gulp.src(["./**/*.js","!./node_modules/**"]).pipe(babel({presets:["@babel/preset-env"]})).pipe(gulp.dest("./dist"))}),gulp.task("scriptsPro",function(){return gulp.src(["./**/*.js","!./node_modules/**"]).pipe(babel({presets:["@babel/preset-env"]})).pipe(uglify({compress:!0})).pipe(gulp.dest("./dist"))}),gulp.task("dev",gulp.series(["clean"],gulp.parallel("json","assets","templates","wxss","scripts","watch")),function(){}),gulp.task("build",gulp.series(["jsonPro","assets","templatesPro","wxssPro","scriptsPro"]));var pro=series("clean","build");gulp.task("pro",gulp.series(["clean","build"],function(s){s()}));